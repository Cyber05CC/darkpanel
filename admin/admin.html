<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>DarkPanel Key Generator</title>
        <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
        <style>
            body {
                background: #0f0f10;
                color: #eee;
                font-family: Inter, system-ui, sans-serif;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                height: 100vh;
                margin: 0;
            }
            button {
                background: #4a6cff;
                border: 0;
                color: #fff;
                padding: 10px 16px;
                margin: 8px;
                border-radius: 10px;
                cursor: pointer;
                font-weight: 600;
            }
            #keys {
                margin-top: 20px;
                width: 90%;
                max-width: 480px;
                text-align: left;
                background: #1b1b1e;
                padding: 14px;
                border-radius: 12px;
                word-wrap: break-word;
            }
            input {
                width: 90%;
                max-width: 480px;
                padding: 10px;
                border-radius: 8px;
                border: 1px solid #333;
                background: #151518;
                color: #fff;
                margin-top: 10px;
            }
        </style>
    </head>
    <body>
        <h2>DarkPanel Key Generator üîê</h2>

        <input type="password" id="adminPass" placeholder="Admin password (for safety)" />
        <div>
            <button id="genTrial">Generate Trial Key</button>
            <button id="genLife">Generate Lifetime Key</button>
        </div>
        <div id="keys"></div>

        <script>
            const firebaseConfig = {
                apiKey: 'AIzaSyC07km-qBiZkQnu-DtrpLIwVvbxjoMQzGg',
                authDomain: 'darkpanelauth.firebaseapp.com',
                databaseURL: 'https://darkpanelauth-default-rtdb.europe-west1.firebasedatabase.app',
                projectId: 'darkpanelauth',
                storageBucket: 'darkpanelauth.appspot.com',
                messagingSenderId: '315614713241',
                appId: '1:315614713241:web:78121bfb3ee9258f3d2f08',
            };
            firebase.initializeApp(firebaseConfig);
            const db = firebase.database();
            const output = document.getElementById('keys');

            const ADMIN_PASSWORD = '2005'; // o'zingga o'zgartir!

            function randomKey(prefix, len = 6) {
                const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
                let res = '';
                for (let i = 0; i < len; i++)
                    res += chars[Math.floor(Math.random() * chars.length)];
                return prefix + '-' + res;
            }

            async function createTrial() {
                if (!checkAdmin()) return;
                const key = randomKey('TRIAL');
                const now = Date.now();
                const expiresAt = now + 7 * 24 * 60 * 60 * 1000;
                await db.ref('keys/' + key).set({
                    type: 'trial',
                    createdAt: now,
                    expiresAt,
                });
                show(
                    `‚úÖ Trial key created:<br><b>${key}</b><br>Expires: ${new Date(
                        expiresAt
                    ).toLocaleString()}`
                );
            }

            async function createLifetime() {
                if (!checkAdmin()) return;
                const key = randomKey('LIFE');
                const now = Date.now();
                await db.ref('keys/' + key).set({
                    type: 'lifetime',
                    createdAt: now,
                });
                show(`üíé Lifetime key created:<br><b>${key}</b>`);
            }

            function checkAdmin() {
                const pass = document.getElementById('adminPass').value;
                if (pass !== ADMIN_PASSWORD) {
                    alert('Incorrect admin password');
                    return false;
                }
                return true;
            }

            function show(msg) {
                output.innerHTML = msg + '<hr>' + output.innerHTML;
            }

            document.getElementById('genTrial').onclick = createTrial;
            document.getElementById('genLife').onclick = createLifetime;
        </script>
    </body>
</html>
